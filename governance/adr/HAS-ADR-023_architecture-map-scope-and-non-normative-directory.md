# ADR-023 Architecture Map における構造表現の責務限定とディレクトリ構造の非規範化

## Status
Accepted

## Context
HAS 2.0 公開後の全体精査により、Architecture Map に以下の問題が確認された。

- 「現在のディレクトリ構造（正）」という記述が存在し、  
  実際には頻繁に変化する構造を**規範として固定**していた
- ディレクトリツリーの手動保守が前提となり、更新漏れが構造的に避けられない
- Architecture Map が本来担うべき  
  「構造の意図」と「配置の事実」が混在していた

これは HAS の設計思想（正解を固定しない／虚偽の権威を作らない）と整合しない。

## Problem
Architecture Map は、どこまでを「示す責務」とし、  
どこからを「示さない」と判断すべきか。

特に以下をどう扱うかが問題となった。

- ディレクトリ構造を規範として提示すべきか
- Layer Model に Governance / ADR を含めるべきか

## Forces
- **正確性の圧力:** 「正」と名付けた以上、常に最新である必要がある
- **運用コスト:** 単独世話人・ミニマム運用における保守負荷
- **思想的一貫性:** HAS は固定的な正解や権威を示さない体系である
- **可読性:** Layer Model を過度に拡張すると理解コストが跳ねる

## Decision
以下の判断を行う。

1. Architecture Map から  
   **「現在のディレクトリ構造（正）」セクションを削除する**
2. ディレクトリ構造は  
   **規範ではなく「設計意図レベル」の説明に留める**
3. Layer Model は **Layer A–C に限定**する
   - Philosophy
   - Constraints
   - Practice
4. Governance / ADR / Protocols は  
   **Layer として扱わず、Supporting / Meta として位置づける**

## Rationale
- ディレクトリ構造は「変化する事実」であり、「守るべき構造」ではない
- Architecture Map の役割は  
  **意図・責務・境界を示すこと**であり、ファイル一覧ではない
- Layer を限定することで、HAS の理解モデルを安定させる
- Governance は実践を支えるが、実践や制約そのものではない

## Pros & Cons
- \+ 虚偽の「正しさ」や権威を生まない
- \+ ドキュメント保守コストが大幅に下がる
- \+ Architecture Map の役割が明確になる
- − リポジトリ構造を一望したい読者には不親切に見える可能性
- − 「どこに何があるか」は別途探索が必要になる

## Note
- 最新のファイル配置はリポジトリ自体を正とする
- 必要に応じて自動生成資料を追加する余地は残すが、本決定には含めない
- 本ADRは **既存ADR（例: ADR-019）の内容修正を目的としない**

## Alternatives Considered
- ディレクトリツリーを自動生成して掲載する案  
  → 現状の運用規模では過剰と判断
- Governance / ADR を Layer D として追加する案  
  → Layer 概念の肥大化を招くため不採用

## Consequences
- Architecture Map は「構造の意図」に専念する文書となる
- HAS の理解は、人ではなく文書構造に依存できる
- 将来、構造が変わっても Map 自体は破綻しにくくなる

## Version
Decision: 1.0
Code: N/A

## Date
2025-12-17